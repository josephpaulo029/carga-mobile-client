<ion-header>
    <ion-navbar>
        <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>
            My Packages
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-refresher (ionRefresh)="getWithoutLoading(filter, $event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    <div text-center margin-top *ngIf="isLoading">
        <ion-spinner></ion-spinner>
    </div>
    <ion-item *ngIf="!isLoading">
        <ion-label>
            <ion-icon name="checkbox-outline"></ion-icon>
            Type
        </ion-label>
        <ion-select [(ngModel)]="filter.deliveryStatus" (ngModelChange)="getPackages(filter)">
            <ion-option value="pending">Pending</ion-option>
            <ion-option value="inProgress">In Progress</ion-option>
            <ion-option value="completed">Completed</ion-option>
        </ion-select>
    </ion-item>
    <h4 ion-text class="no-packages" text-center *ngIf="!isLoading && !packages.length">No packages</h4>
    <ion-list margin-top *ngIf="!isLoading && packages.length">
        <ion-card *ngFor="let package of packages" (click)="visitPackage(package)">
            <ion-card-content>
                <ion-grid>
                    <ion-row>
                        <ion-col text-left class="location-text">
                            {{package.custom && package.custom.pickupLocationAddressString}}
                        </ion-col>
                        <ion-col text-center>
                            <ion-icon class="arrow-right" ios="ios-arrow-round-forward" md="md-arrow-round-forward"></ion-icon>
                        </ion-col>
                        <ion-col text-right class="location-text">
                            {{package.custom && package.custom.destinationAddressString}}
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col text-center>
                            <ion-note>{{package.pickupDate | date:"MM / dd / yy - h:mm a "}}</ion-note>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col col-5>
                            <ion-note>
                                {{package.packageType === 'perishableFood' ? 'Perishable Food' : ''}}
                                {{package.packageType === 'preservedFood' ? 'Preserved Food' : ''}}
                                {{package.packageType === 'document' ? 'Document' : ''}}
                                {{package.packageType === 'electronics' ? 'Electronics' : ''}}
                                {{package.packageType === 'clothing' ? 'Clothing' : ''}}
                                {{package.packageType === 'default' ? 'Default' : ''}}
                            </ion-note>
                        </ion-col>
                        <ion-col col-5>
                            <ion-note>{{package.dimension}}</ion-note>
                        </ion-col>
                        <ion-col col-2>
                            <ion-note>{{package.weight}} kg</ion-note>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-card-content>
        </ion-card>
    </ion-list>

</ion-content>